{"version":3,"sources":["components/Blog.js","components/Notification.js","components/Togglable.js","components/NewBlog.js","utils/storage.js","services/blogs.js","services/login.js","App.js","index.js"],"names":["Blog","blog","handleLike","handleRemove","own","useState","visible","setVisible","label","style","paddingTop","paddingLeft","border","borderWidth","marginBottom","className","title","author","onClick","url","likes","id","user","name","Notification","notification","borderStyle","borderRadius","padding","color","type","background","message","Togglable","React","forwardRef","props","ref","hideWhenVisible","display","showWhenVisible","toggleVisibility","useImperativeHandle","buttonLabel","children","displayName","NewBlog","setTitle","setAuthor","setUrl","onSubmit","event","preventDefault","createBlog","value","onChange","target","storageKey","localStorage","setItem","JSON","stringify","parse","getItem","removeItem","baseUrl","getConfig","headers","Authorization","storage","token","axios","get","then","response","data","post","put","delete","login","credentials","a","App","blogs","setBlogs","setUser","username","setUsername","password","setPassword","setNotification","blogFormRef","createRef","useEffect","blogService","notifyWith","setTimeout","handleLogin","loginService","newBlog","current","concat","console","log","blogToLike","find","b","likedBlog","map","blogToRemove","window","confirm","filter","sort","b1","b2","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.da2a61f8.chunk.js","sourcesContent":["import React, { useState } from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nconst Blog = ({ blog, handleLike, handleRemove, own }) => {\r\n  const [visible, setVisible] = useState(false)\r\n\r\n  const blogStyle = {\r\n    paddingTop: 10,\r\n    paddingLeft: 2,\r\n    border: 'solid',\r\n    borderWidth: 1,\r\n    marginBottom: 5\r\n  }\r\n\r\n  const label = visible ? 'hide' : 'view'\r\n\r\n  return (\r\n    <div style={blogStyle} className='blog'>\r\n      <div>\r\n        <i>{blog.title}</i> by {blog.author} <button onClick={() => setVisible(!visible)}>{label}</button>\r\n      </div>\r\n      {visible&&(\r\n        <div>\r\n          <div>{blog.url}</div>\r\n          <div>likes {blog.likes}\r\n            <button onClick={() => handleLike(blog.id)}>like</button>\r\n          </div>\r\n          <div>{blog.user.name}</div>\r\n          {own&&<button onClick={() => handleRemove(blog.id)}>remove</button>}\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\nBlog.propTypes = {\r\n  blog: PropTypes.shape({\r\n    title: PropTypes.string.isRequired,\r\n    author: PropTypes.string.isRequired,\r\n    url: PropTypes.string.isRequired,\r\n  }).isRequired,\r\n  handleLike: PropTypes.func.isRequired,\r\n  handleRemove: PropTypes.func.isRequired,\r\n  own: PropTypes.bool.isRequired\r\n}\r\n\r\nexport default Blog","import React from 'react'\r\n\r\nconst Notification = ({ notification }) => {\r\n  if ( !notification ) {\r\n    return null\r\n  }\r\n\r\n  const style = {\r\n    borderStyle: 'solid',\r\n    borderRadius: 5,\r\n    padding: 10,\r\n    color: notification.type === 'success' ? 'green' : 'red',\r\n    background: 'lightgrey'\r\n  }\r\n\r\n  return <div style={style}>\r\n    {notification.message}\r\n  </div>\r\n}\r\n\r\nexport default Notification","import React, { useState, useImperativeHandle } from 'react'\r\n\r\nconst Togglable = React.forwardRef((props, ref) => {\r\n  const [visible, setVisible] = useState(false)\r\n\r\n  const hideWhenVisible = { display: visible ? 'none' : '' }\r\n  const showWhenVisible = { display: visible ? '' : 'none' }\r\n\r\n  const toggleVisibility = () => {\r\n    setVisible(!visible)\r\n  }\r\n\r\n  useImperativeHandle(ref, () => {\r\n    return {\r\n      toggleVisibility\r\n    }\r\n  })\r\n\r\n  return (\r\n    <div>\r\n      <div style={hideWhenVisible}>\r\n        <button onClick={toggleVisibility}>{props.buttonLabel}</button>\r\n      </div>\r\n      <div style={showWhenVisible} className=\"togglableContent\">\r\n        {props.children}\r\n        <button onClick={toggleVisibility}>cancel</button>\r\n      </div>\r\n    </div>\r\n  )\r\n})\r\n\r\nTogglable.displayName = 'Togglable'\r\n\r\nexport default Togglable","import React, { useState } from 'react'\r\n\r\nconst NewBlog = (props) => {\r\n  const [title, setTitle] = useState('')\r\n  const [author, setAuthor] = useState('')\r\n  const [url, setUrl] = useState('')\r\n\r\n  const handleNewBlog = (event) => {\r\n    event.preventDefault()\r\n\r\n    props.createBlog({\r\n      title, author, url\r\n    })\r\n\r\n    setTitle('')\r\n    setAuthor('')\r\n    setUrl('')\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h2>create new</h2>\r\n      <form onSubmit={handleNewBlog}>\r\n        <div>\r\n          author\r\n          <input\r\n            id='author'\r\n            value={author}\r\n            onChange={({ target }) => setAuthor(target.value)}\r\n          />\r\n        </div>\r\n        <div>\r\n          title\r\n          <input\r\n            id='title'\r\n            value={title}\r\n            onChange={({ target }) => setTitle(target.value)}\r\n          />\r\n        </div>\r\n        <div>\r\n          url\r\n          <input\r\n            id='url'\r\n            value={url}\r\n            onChange={({ target }) => setUrl(target.value)}\r\n          />\r\n        </div>\r\n        <button id=\"create\">create</button>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default NewBlog","const storageKey = 'loggedBlogAppUser'\r\n\r\nconst saveUser = (user) =>\r\n  localStorage.setItem(storageKey, JSON.stringify(user))\r\n\r\nconst loadUser = () =>\r\n  JSON.parse(localStorage.getItem(storageKey))\r\n\r\nconst logoutUser = () =>\r\n  localStorage.removeItem(storageKey)\r\n\r\n/* eslint-disable */\r\nexport default {\r\n  saveUser,\r\n  loadUser,\r\n  logoutUser\r\n}","import axios from 'axios'\r\nimport storage from '../utils/storage'\r\n\r\nconst baseUrl = '/api/blogs'\r\n\r\nconst getConfig = () => {\r\n  return {\r\n    headers: { Authorization: `bearer ${storage.loadUser().token}` }\r\n  }\r\n}\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst create = (blog) => {\r\n  const request = axios.post(baseUrl, blog, getConfig())\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst update = (blog) => {\r\n  const request = axios.put(`${baseUrl}/${blog.id}`, blog, getConfig())\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst remove = (id) => {\r\n  const request = axios.delete(`${baseUrl}/${id}`, getConfig())\r\n  return request.then(response => response.data)\r\n}\r\n\r\n/* eslint-disable-next-line */\r\nexport default { getAll, create, update, remove }","import axios from 'axios'\r\nconst baseUrl = '/api/login'\r\n\r\nconst login = async credentials => {\r\n  const response = await axios.post(baseUrl, credentials)\r\n  return response.data\r\n}\r\n\r\n// eslint-disable-next-line\r\nexport default { login }","import React, { useState, useEffect } from 'react'\nimport Blog from './components/Blog'\nimport Notification from './components/Notification'\nimport Togglable from './components/Togglable'\nimport NewBlog from './components/NewBlog'\n\nimport blogService from './services/blogs'\nimport loginService from './services/login'\nimport storage from './utils/storage'\n\nconst App = () => {\n  const [blogs, setBlogs] = useState([])\n  const [user, setUser] = useState(null)\n  const [username, setUsername] = useState('')\n  const [password, setPassword] = useState('')\n  const [notification, setNotification] = useState(null)\n\n  const blogFormRef = React.createRef()\n\n  useEffect(() => {\n    blogService.getAll().then(blogs =>\n      setBlogs(blogs)\n    )\n  }, [])\n\n  useEffect(() => {\n    const user = storage.loadUser()\n    setUser(user)\n  }, [])\n\n  const notifyWith = (message, type='success') => {\n    setNotification({\n      message, type\n    })\n    setTimeout(() => {\n      setNotification(null)\n    }, 5000)\n  }\n\n  const handleLogin = async (event) => {\n    event.preventDefault()\n    try {\n      const user = await loginService.login({\n        username, password\n      })\n\n      setUsername('')\n      setPassword('')\n      setUser(user)\n      notifyWith(`${user.name} welcome back!`)\n      storage.saveUser(user)\n    } catch(exception) {\n      notifyWith('wrong username/password', 'error')\n    }\n  }\n\n  const createBlog = async (blog) => {\n    try {\n      const newBlog = await blogService.create(blog)\n      blogFormRef.current.toggleVisibility()\n      setBlogs(blogs.concat(newBlog))\n      notifyWith(`a new blog '${newBlog.title}' by ${newBlog.author} added!`)\n    } catch(exception) {\n      console.log(exception)\n    }\n  }\n\n  const handleLike = async (id) => {\n    const blogToLike = blogs.find(b => b.id === id)\n    const likedBlog = { ...blogToLike, likes: blogToLike.likes + 1, user: blogToLike.user.id }\n    await blogService.update(likedBlog)\n    setBlogs(blogs.map(b => b.id === id ?  { ...blogToLike, likes: blogToLike.likes + 1 } : b))\n  }\n\n  const handleRemove = async (id) => {\n    const blogToRemove = blogs.find(b => b.id === id)\n    const ok = window.confirm(`Remove blog ${blogToRemove.title} by ${blogToRemove.author}`)\n    if (ok) {\n      await blogService.remove(id)\n      setBlogs(blogs.filter(b => b.id !== id))\n    }\n  }\n\n  const handleLogout = () => {\n    setUser(null)\n    storage.logoutUser()\n  }\n\n  if ( !user ) {\n    return (\n      <div>\n        <h2>login to application</h2>\n\n        <Notification notification={notification} />\n\n        <form onSubmit={handleLogin}>\n          <div>\n            username\n            <input\n              id='username'\n              value={username}\n              onChange={({ target }) => setUsername(target.value)}\n            />\n          </div>\n          <div>\n            password\n            <input\n              id='password'\n              value={password}\n              onChange={({ target }) => setPassword(target.value)}\n            />\n          </div>\n          <button id='login'>login</button>\n        </form>\n      </div>\n    )\n  }\n\n  const byLikes = (b1, b2) => b2.likes - b1.likes\n\n  return (\n    <div>\n      <h2>blogs</h2>\n\n      <Notification notification={notification} />\n\n      <p>\n        {user.name} logged in <button onClick={handleLogout}>logout</button>\n      </p>\n\n      <Togglable buttonLabel='create new blog'  ref={blogFormRef}>\n        <NewBlog createBlog={createBlog} />\n      </Togglable>\n\n      {blogs.sort(byLikes).map(blog =>\n        <Blog\n          key={blog.id}\n          blog={blog}\n          handleLike={handleLike}\n          handleRemove={handleRemove}\n          own={user.username===blog.user.username}\n        />\n      )}\n    </div>\n  )\n}\n\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}